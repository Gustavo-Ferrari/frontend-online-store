{"ast":null,"code":"var _jsxFileName = \"/home/gustavo/Portifolio/frontend-online-store/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport Home from './pages/Home';\nimport CardCarrinho from './components/CardCarrinho';\nimport { getProductsFromCategoryAndQuery } from './services/api';\nimport ProductDetails from './pages/ProductDetails';\nimport FinishingProduct from './pages/FinishingProduct';\n\nclass App extends React.Component {\n  constructor() {\n    var _localStorage$getItem;\n\n    super(...arguments);\n    this.state = {\n      searchInput: '',\n      cartItems: JSON.parse((_localStorage$getItem = localStorage.getItem('cartItemnpm install react-router-dom@6s')) !== null && _localStorage$getItem !== void 0 ? _localStorage$getItem : '[]')\n    };\n\n    this.updateAppState = (entries, callbackFunction) => {\n      this.setState({ ...entries\n      }, callbackFunction);\n    };\n\n    this.handleChange = _ref => {\n      let {\n        target: {\n          name,\n          value\n        }\n      } = _ref;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleClick = async () => {\n      const {\n        searchInput,\n        categoryId\n      } = this.state;\n      const queryResponse = await getProductsFromCategoryAndQuery(categoryId, searchInput);\n      const searchResults = queryResponse.results;\n      searchResults.forEach(result => {\n        result.isAddDisabled = false;\n      });\n      this.setState({\n        searchResults\n      });\n    };\n\n    this.handleOnKeyDown = e => {\n      if (e.key === 'Enter') {\n        this.handleClick();\n      }\n    };\n\n    this.handleAddProduct = product => {\n      const {\n        cartItems\n      } = this.state;\n      const indexOfCartItem = cartItems.findIndex(cartListItem => cartListItem.id === product.id);\n\n      if (indexOfCartItem >= 0) {\n        const foundItem = cartItems[indexOfCartItem];\n        foundItem.cartQuantity += 1;\n        foundItem.totalPrice += foundItem.price;\n        foundItem.availability = this.isAddButtonDisabled(product);\n        this.setState({\n          cartItems\n        });\n        localStorage.setItem('cartItems', JSON.stringify(cartItems));\n        return;\n      }\n\n      product.cartQuantity = 1;\n      product.availability = this.isAddButtonDisabled(product);\n      product.totalPrice = product.price;\n      this.checkAvalabilityOfResults(product);\n      this.setState({\n        cartItems: [...cartItems, product]\n      });\n      localStorage.setItem('cartItems', JSON.stringify([...cartItems, product]));\n    };\n\n    this.checkAvalabilityOfResults = product => {\n      const {\n        searchResults\n      } = this.state;\n      const indexOfResultsItem = searchResults.findIndex(resultItem => resultItem.id === product.id);\n      const foundResult = searchResults[indexOfResultsItem];\n      foundResult.isAddDisabled = this.isAddButtonDisabled(foundResult);\n      this.setState({\n        searchResults\n      });\n    };\n\n    this.isAddButtonDisabled = _ref2 => {\n      let {\n        cartQuantity,\n        available_quantity: availableQuantity\n      } = _ref2;\n\n      if (cartQuantity === availableQuantity) {\n        return true;\n      }\n\n      return false;\n    };\n  }\n\n  render() {\n    const {\n      cartItems\n    } = this.state;\n    return /*#__PURE__*/React.createElement(BrowserRouter, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: () => /*#__PURE__*/React.createElement(Home, Object.assign({}, this.state, {\n        handleChange: this.handleChange,\n        updateAppState: this.updateAppState,\n        handleClick: this.handleClick,\n        handleOnKeyDown: this.handleOnKeyDown,\n        handleAddProduct: this.handleAddProduct,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/CardCarrinho\",\n      component: () => /*#__PURE__*/React.createElement(CardCarrinho, {\n        cartItems: cartItems,\n        updateAppState: this.updateAppState,\n        isAddButtonDisabled: this.isAddButtonDisabled,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 15\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/product-details/:id\",\n      render: props => /*#__PURE__*/React.createElement(ProductDetails, Object.assign({}, props, this.state, {\n        updateAppState: this.updateAppState,\n        handleAddProduct: this.handleAddProduct,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 15\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/checkout\",\n      render: () => /*#__PURE__*/React.createElement(FinishingProduct, Object.assign({}, this.state, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 29\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/gustavo/Portifolio/frontend-online-store/src/App.js"],"names":["React","BrowserRouter","Route","Switch","Home","CardCarrinho","getProductsFromCategoryAndQuery","ProductDetails","FinishingProduct","App","Component","state","searchInput","cartItems","JSON","parse","localStorage","getItem","updateAppState","entries","callbackFunction","setState","handleChange","target","name","value","handleClick","categoryId","queryResponse","searchResults","results","forEach","result","isAddDisabled","handleOnKeyDown","e","key","handleAddProduct","product","indexOfCartItem","findIndex","cartListItem","id","foundItem","cartQuantity","totalPrice","price","availability","isAddButtonDisabled","setItem","stringify","checkAvalabilityOfResults","indexOfResultsItem","resultItem","foundResult","available_quantity","availableQuantity","render","props"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport Home from './pages/Home';\nimport CardCarrinho from './components/CardCarrinho';\nimport { getProductsFromCategoryAndQuery } from './services/api';\nimport ProductDetails from './pages/ProductDetails';\nimport FinishingProduct from './pages/FinishingProduct';\n\nclass App extends React.Component {\n  state = {\n    searchInput: '',\n    cartItems: JSON.parse((localStorage.getItem('cartItemnpm install react-router-dom@6s') ?? '[]')),\n  }\n\n  updateAppState = (entries, callbackFunction) => {\n    this.setState({ ...entries }, callbackFunction);\n  };\n\n  handleChange = ({ target: { name, value } }) => {\n    this.setState({ [name]: value });\n  };\n\n  handleClick = async () => {\n    const { searchInput, categoryId } = this.state;\n    const queryResponse = await getProductsFromCategoryAndQuery(categoryId, searchInput);\n    const searchResults = queryResponse.results;\n    searchResults.forEach((result) => { result.isAddDisabled = false; });\n    this.setState({ searchResults });\n  }\n\n  handleOnKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleClick();\n    }\n  }\n\n  handleAddProduct = (product) => {\n    const { cartItems } = this.state;\n\n    const indexOfCartItem = cartItems\n      .findIndex((cartListItem) => cartListItem.id === product.id);\n\n    if (indexOfCartItem >= 0) {\n      const foundItem = cartItems[indexOfCartItem];\n      foundItem.cartQuantity += 1;\n      foundItem.totalPrice += foundItem.price;\n      foundItem.availability = this.isAddButtonDisabled(product);\n      this.setState({ cartItems });\n      localStorage.setItem('cartItems', JSON.stringify(cartItems));\n      return;\n    }\n    product.cartQuantity = 1;\n    product.availability = this.isAddButtonDisabled(product);\n    product.totalPrice = product.price;\n    this.checkAvalabilityOfResults(product);\n    this.setState({ cartItems: [...cartItems, product] });\n    localStorage.setItem('cartItems', JSON.stringify([...cartItems, product]));\n  }\n\n  checkAvalabilityOfResults = (product) => {\n    const { searchResults } = this.state;\n    const indexOfResultsItem = searchResults\n      .findIndex((resultItem) => resultItem.id === product.id);\n    const foundResult = searchResults[indexOfResultsItem];\n    foundResult.isAddDisabled = this.isAddButtonDisabled(foundResult);\n    this.setState({ searchResults });\n  }\n\n  isAddButtonDisabled = ({ cartQuantity, available_quantity: availableQuantity }) => {\n    if (cartQuantity === availableQuantity) {\n      return true;\n    }\n    return false;\n  }\n\n  render() {\n    const { cartItems } = this.state;\n\n    return (\n      <BrowserRouter>\n        <Switch>\n          <Route\n            exact\n            path=\"/\"\n            render={ () => (\n              <Home\n                { ...this.state }\n                handleChange={ this.handleChange }\n                updateAppState={ this.updateAppState }\n                handleClick={ this.handleClick }\n                handleOnKeyDown={ this.handleOnKeyDown }\n                handleAddProduct={ this.handleAddProduct }\n              />) }\n          />\n          <Route\n            exact\n            path=\"/CardCarrinho\"\n            component={ () => (\n              <CardCarrinho\n                cartItems={ cartItems }\n                updateAppState={ this.updateAppState }\n                isAddButtonDisabled={ this.isAddButtonDisabled }\n              />) }\n          />\n          <Route\n            path=\"/product-details/:id\"\n            render={ (props) => (\n              <ProductDetails\n                { ...props }\n                { ...this.state }\n                updateAppState={ this.updateAppState }\n                handleAddProduct={ this.handleAddProduct }\n              />) }\n          />\n          <Route\n            path=\"/checkout\"\n            render={ () => (<FinishingProduct { ...this.state } />) }\n          />\n        </Switch>\n      </BrowserRouter>);\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}