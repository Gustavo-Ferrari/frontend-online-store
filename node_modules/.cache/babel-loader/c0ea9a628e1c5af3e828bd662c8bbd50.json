{"ast":null,"code":"var _jsxFileName = \"/home/gustavo/Portifolio/frontend-online-store/frontend-online-store/src/components/EvaluatingForm.jsx\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport EvaluationZone from './EvaluationZone';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class EvaluatingForm extends Component {\n  constructor() {\n    super();\n\n    this.handleRadioClick = _ref => {\n      let {\n        target\n      } = _ref;\n      const {\n        name\n      } = target;\n      const value = target.type === 'radio' ? +target.value : target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.isRadioSelected = value => {\n      const {\n        selectedRadioButton\n      } = this.state;\n      return selectedRadioButton === value;\n    };\n\n    this.onEvaluationClic = () => {\n      const {\n        user,\n        comment,\n        selectedRadioButton: rating\n      } = this.state;\n      const {\n        match: {\n          params: {\n            id\n          }\n        }\n      } = this.props;\n      const arrayOfEvaluation = JSON.parse(localStorage.getItem('evaluations'));\n      const evaluation = {\n        user,\n        comment,\n        id,\n        rating\n      };\n\n      if (arrayOfEvaluation) {\n        arrayOfEvaluation.push(evaluation);\n        localStorage.setItem('evaluations', JSON.stringify(arrayOfEvaluation));\n      } else {\n        localStorage.setItem('evaluations', JSON.stringify([evaluation]));\n      }\n\n      this.setState({\n        user: '',\n        comment: '',\n        selectedRadioButton: null\n      });\n      this.getEvaluation();\n    };\n\n    this.state = {\n      // estado inicial\n      user: '',\n      comment: '',\n      disabled: true,\n      selectedRadioButton: null,\n      index: []\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  componentDidMount() {\n    this.getEvaluation();\n    this.ratingArray();\n  }\n\n  componentDidUpdate() {\n    const {\n      disabled,\n      selectedRadioButton\n    } = this.state;\n\n    if (selectedRadioButton && disabled) {\n      this.setState({\n        disabled: false\n      });\n    } else if (!selectedRadioButton && !disabled) {\n      this.setState({\n        disabled: true\n      });\n    }\n  }\n\n  handleChange(_ref2) {\n    let {\n      target: {\n        value,\n        name\n      }\n    } = _ref2;\n    // Mudando o estado apenas com 3 caracteres obrigatório pro email\n    this.setState({\n      [name]: value\n    });\n  }\n\n  getEvaluation() {\n    const arrayOfEvaluation = JSON.parse(localStorage.getItem('evaluations'));\n\n    if (arrayOfEvaluation) {\n      this.setState({\n        arrayOfEvaluation\n      });\n    }\n  }\n\n  ratingArray() {\n    const MAX_RATING = 5;\n    const index = [];\n\n    for (let e = 1; e <= MAX_RATING; e += 1) {\n      index.push(e);\n    }\n\n    this.setState({\n      index\n    });\n  }\n\n  render() {\n    const {\n      user,\n      comment,\n      index,\n      disabled\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Avalia\\xE7\\xF5es\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: index.map(e => /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: `radio${e}`,\n            children: [e, /*#__PURE__*/_jsxDEV(\"input\", {\n              id: `radio${e}`,\n              type: \"radio\",\n              \"data-testid\": `${e}-rating`,\n              name: \"selectedRadioButton\",\n              value: e,\n              checked: this.isRadioSelected(e),\n              onChange: this.handleRadioClick\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 19\n            }, this)]\n          }, e, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"user\",\n            name: \"user\",\n            value: user,\n            type: \"text\",\n            placeholder: \"Email\",\n            onChange: this.handleChange,\n            \"data-testid\": \"product-detail-email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n            id: \"comment\",\n            name: \"comment\",\n            value: comment,\n            \"data-testid\": \"product-detail-evaluation\",\n            placeholder: \"Coment\\xE1rios\",\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          \"data-testid\": \"submit-review-btn\",\n          type: \"button\",\n          disabled: disabled,\n          onClick: this.onEvaluationClic,\n          children: \"AVALIA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EvaluationZone, { ...this.state,\n        ...this.props\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nEvaluatingForm.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired\n    }).isRequired\n  }).isRequired\n};","map":{"version":3,"names":["React","Component","PropTypes","EvaluationZone","EvaluatingForm","constructor","handleRadioClick","target","name","value","type","setState","isRadioSelected","selectedRadioButton","state","onEvaluationClic","user","comment","rating","match","params","id","props","arrayOfEvaluation","JSON","parse","localStorage","getItem","evaluation","push","setItem","stringify","getEvaluation","disabled","index","handleChange","bind","componentDidMount","ratingArray","componentDidUpdate","MAX_RATING","e","render","handleSubmit","map","propTypes","shape","string","isRequired"],"sources":["/home/gustavo/Portifolio/frontend-online-store/frontend-online-store/src/components/EvaluatingForm.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport EvaluationZone from './EvaluationZone';\n\nexport default class EvaluatingForm extends Component {\n  constructor() {\n    super();\n    this.state = { // estado inicial\n      user: '',\n      comment: '',\n      disabled: true,\n      selectedRadioButton: null,\n      index: [],\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  componentDidMount() {\n    this.getEvaluation();\n    this.ratingArray();\n  }\n\n  componentDidUpdate() {\n    const { disabled, selectedRadioButton } = this.state;\n    if (selectedRadioButton && disabled) {\n      this.setState({ disabled: false });\n    } else if (!selectedRadioButton && !disabled) {\n      this.setState({ disabled: true });\n    }\n  }\n\n  handleChange({ target: { value, name } }) { // Mudando o estado apenas com 3 caracteres obrigatório pro email\n    this.setState({\n      [name]: value,\n    });\n  }\n\n  handleRadioClick = ({ target }) => {\n    const { name } = target;\n    const value = target.type === 'radio' ? +target.value : target.value;\n    this.setState({ [name]: value });\n  }\n\n  getEvaluation() {\n    const arrayOfEvaluation = JSON.parse(localStorage.getItem('evaluations'));\n    if (arrayOfEvaluation) {\n      this.setState({ arrayOfEvaluation });\n    }\n  }\n\n  isRadioSelected = (value) => {\n    const { selectedRadioButton } = this.state;\n    return selectedRadioButton === value;\n  }\n\n  onEvaluationClic = () => {\n    const { user, comment, selectedRadioButton: rating } = this.state;\n    const { match: { params: { id } } } = this.props;\n    const arrayOfEvaluation = JSON.parse(localStorage.getItem('evaluations'));\n    const evaluation = { user, comment, id, rating };\n\n    if (arrayOfEvaluation) {\n      arrayOfEvaluation.push(evaluation);\n      localStorage.setItem('evaluations', JSON.stringify(arrayOfEvaluation));\n    } else {\n      localStorage.setItem('evaluations', JSON.stringify([evaluation]));\n    }\n    this.setState({\n      user: '',\n      comment: '',\n      selectedRadioButton: null,\n    });\n    this.getEvaluation();\n  }\n\n  ratingArray() {\n    const MAX_RATING = 5;\n    const index = [];\n    for (let e = 1; e <= MAX_RATING; e += 1) {\n      index.push(e);\n    }\n    this.setState({ index });\n  }\n\n  render() {\n    const { user, comment, index, disabled } = this.state;\n    return (\n      <div>\n        <h1>Avaliações</h1>\n        <form onSubmit={ this.handleSubmit }>\n          <div>\n            {\n              index.map((e) => (\n                <label htmlFor={ `radio${e}` } key={ e }>\n                  { e }\n                  <input\n                    id={ `radio${e}` }\n                    type=\"radio\"\n                    data-testid={ `${e}-rating` }\n                    name=\"selectedRadioButton\"\n                    value={ e }\n                    checked={ this.isRadioSelected(e) }\n                    onChange={ this.handleRadioClick }\n                  />\n                </label>\n              ))\n            }\n          </div>\n          <div>\n            <input\n              id=\"user\"\n              name=\"user\"\n              value={ user }\n              type=\"text\"\n              placeholder=\"Email\"\n              onChange={ this.handleChange }\n              data-testid=\"product-detail-email\"\n            />\n          </div>\n          <div>\n            <textarea\n              id=\"comment\"\n              name=\"comment\"\n              value={ comment }\n              data-testid=\"product-detail-evaluation\"\n              placeholder=\"Comentários\"\n              onChange={ this.handleChange }\n            />\n          </div>\n          <button\n            data-testid=\"submit-review-btn\"\n            type=\"button\"\n            disabled={ disabled }\n            onClick={ this.onEvaluationClic }\n          >\n            AVALIA\n          </button>\n        </form>\n        <EvaluationZone { ...this.state } { ...this.props } />\n      </div>\n    );\n  }\n}\nEvaluatingForm.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired,\n    }).isRequired,\n  }).isRequired,\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}