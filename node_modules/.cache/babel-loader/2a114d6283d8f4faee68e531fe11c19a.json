{"ast":null,"code":"var _jsxFileName = \"/home/gustavo/Portifolio/frontend-online-store/frontend-online-store/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport Home from './pages/Home';\nimport CardCarrinho from './components/CardCarrinho';\nimport { getProductsFromCategoryAndQuery } from './services/api';\nimport ProductDetails from './pages/ProductDetails';\nimport FinishingProduct from './pages/FinishingProduct';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends React.Component {\n  constructor() {\n    var _localStorage$getItem;\n\n    super(...arguments);\n    this.state = {\n      searchInput: '',\n      cartItems: JSON.parse((_localStorage$getItem = localStorage.getItem('cartItems')) !== null && _localStorage$getItem !== void 0 ? _localStorage$getItem : '[]')\n    };\n\n    this.updateAppState = (entries, callbackFunction) => {\n      this.setState({ ...entries\n      }, callbackFunction);\n    };\n\n    this.handleChange = _ref => {\n      let {\n        target: {\n          name,\n          value\n        }\n      } = _ref;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleClick = async () => {\n      const {\n        searchInput,\n        categoryId\n      } = this.state;\n      const queryResponse = await getProductsFromCategoryAndQuery(categoryId, searchInput);\n      const searchResults = queryResponse.results;\n      searchResults.forEach(result => {\n        result.isAddDisabled = false;\n      });\n      this.setState({\n        searchResults\n      });\n    };\n\n    this.handleOnKeyDown = e => {\n      if (e.key === 'Enter') {\n        this.handleClick();\n      }\n    };\n\n    this.handleAddProduct = product => {\n      const {\n        cartItems\n      } = this.state;\n      const indexOfCartItem = cartItems.findIndex(cartListItem => cartListItem.id === product.id);\n\n      if (indexOfCartItem >= 0) {\n        const foundItem = cartItems[indexOfCartItem];\n        foundItem.cartQuantity += 1;\n        foundItem.totalPrice += foundItem.price;\n        foundItem.availability = this.isAddButtonDisabled(product);\n        this.setState({\n          cartItems\n        });\n        localStorage.setItem('cartItems', JSON.stringify(cartItems));\n        return;\n      }\n\n      product.cartQuantity = 1;\n      product.availability = this.isAddButtonDisabled(product);\n      product.totalPrice = product.price;\n      this.checkAvalabilityOfResults(product);\n      this.setState({\n        cartItems: [...cartItems, product]\n      });\n      localStorage.setItem('cartItems', JSON.stringify([...cartItems, product]));\n    };\n\n    this.checkAvalabilityOfResults = product => {\n      const {\n        searchResults\n      } = this.state;\n      const indexOfResultsItem = searchResults.findIndex(resultItem => resultItem.id === product.id);\n      const foundResult = searchResults[indexOfResultsItem];\n      foundResult.isAddDisabled = this.isAddButtonDisabled(foundResult);\n      this.setState({\n        searchResults\n      });\n    };\n\n    this.isAddButtonDisabled = _ref2 => {\n      let {\n        cartQuantity,\n        available_quantity: availableQuantity\n      } = _ref2;\n\n      if (cartQuantity === availableQuantity) {\n        return true;\n      }\n\n      return false;\n    };\n  }\n\n  render() {\n    const {\n      cartItems\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(BrowserRouter, {\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          render: () => /*#__PURE__*/_jsxDEV(Home, { ...this.state,\n            handleChange: this.handleChange,\n            updateAppState: this.updateAppState,\n            handleClick: this.handleClick,\n            handleOnKeyDown: this.handleOnKeyDown,\n            handleAddProduct: this.handleAddProduct\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/CardCarrinho\",\n          component: () => /*#__PURE__*/_jsxDEV(CardCarrinho, {\n            cartItems: cartItems,\n            updateAppState: this.updateAppState,\n            isAddButtonDisabled: this.isAddButtonDisabled\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/product-details/:id\",\n          render: props => /*#__PURE__*/_jsxDEV(ProductDetails, { ...props,\n            ...this.state,\n            updateAppState: this.updateAppState,\n            handleAddProduct: this.handleAddProduct\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/checkout\",\n          render: () => /*#__PURE__*/_jsxDEV(FinishingProduct, { ...this.state\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"names":["React","BrowserRouter","Route","Switch","Home","CardCarrinho","getProductsFromCategoryAndQuery","ProductDetails","FinishingProduct","App","Component","state","searchInput","cartItems","JSON","parse","localStorage","getItem","updateAppState","entries","callbackFunction","setState","handleChange","target","name","value","handleClick","categoryId","queryResponse","searchResults","results","forEach","result","isAddDisabled","handleOnKeyDown","e","key","handleAddProduct","product","indexOfCartItem","findIndex","cartListItem","id","foundItem","cartQuantity","totalPrice","price","availability","isAddButtonDisabled","setItem","stringify","checkAvalabilityOfResults","indexOfResultsItem","resultItem","foundResult","available_quantity","availableQuantity","render","props"],"sources":["/home/gustavo/Portifolio/frontend-online-store/frontend-online-store/src/App.js"],"sourcesContent":["import React from 'react';\nimport './App.css';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport Home from './pages/Home';\nimport CardCarrinho from './components/CardCarrinho';\nimport { getProductsFromCategoryAndQuery } from './services/api';\nimport ProductDetails from './pages/ProductDetails';\nimport FinishingProduct from './pages/FinishingProduct';\n\nclass App extends React.Component {\n  state = {\n    searchInput: '',\n    cartItems: JSON.parse((localStorage.getItem('cartItems') ?? '[]')),\n  }\n\n  updateAppState = (entries, callbackFunction) => {\n    this.setState({ ...entries }, callbackFunction);\n  };\n\n  handleChange = ({ target: { name, value } }) => {\n    this.setState({ [name]: value });\n  };\n\n  handleClick = async () => {\n    const { searchInput, categoryId } = this.state;\n    const queryResponse = await getProductsFromCategoryAndQuery(categoryId, searchInput);\n    const searchResults = queryResponse.results;\n    searchResults.forEach((result) => { result.isAddDisabled = false; });\n    this.setState({ searchResults });\n  }\n\n  handleOnKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleClick();\n    }\n  }\n\n  handleAddProduct = (product) => {\n    const { cartItems } = this.state;\n\n    const indexOfCartItem = cartItems\n      .findIndex((cartListItem) => cartListItem.id === product.id);\n\n    if (indexOfCartItem >= 0) {\n      const foundItem = cartItems[indexOfCartItem];\n      foundItem.cartQuantity += 1;\n      foundItem.totalPrice += foundItem.price;\n      foundItem.availability = this.isAddButtonDisabled(product);\n      this.setState({ cartItems });\n      localStorage.setItem('cartItems', JSON.stringify(cartItems));\n      return;\n    }\n    product.cartQuantity = 1;\n    product.availability = this.isAddButtonDisabled(product);\n    product.totalPrice = product.price;\n    this.checkAvalabilityOfResults(product);\n    this.setState({ cartItems: [...cartItems, product] });\n    localStorage.setItem('cartItems', JSON.stringify([...cartItems, product]));\n  }\n\n  checkAvalabilityOfResults = (product) => {\n    const { searchResults } = this.state;\n    const indexOfResultsItem = searchResults\n      .findIndex((resultItem) => resultItem.id === product.id);\n    const foundResult = searchResults[indexOfResultsItem];\n    foundResult.isAddDisabled = this.isAddButtonDisabled(foundResult);\n    this.setState({ searchResults });\n  }\n\n  isAddButtonDisabled = ({ cartQuantity, available_quantity: availableQuantity }) => {\n    if (cartQuantity === availableQuantity) {\n      return true;\n    }\n    return false;\n  }\n\n  render() {\n    const { cartItems } = this.state;\n\n    return (\n      <BrowserRouter>\n        <Switch>\n          <Route\n            exact\n            path=\"/\"\n            render={ () => (\n              <Home\n                { ...this.state }\n                handleChange={ this.handleChange }\n                updateAppState={ this.updateAppState }\n                handleClick={ this.handleClick }\n                handleOnKeyDown={ this.handleOnKeyDown }\n                handleAddProduct={ this.handleAddProduct }\n              />) }\n          />\n          <Route\n            exact\n            path=\"/CardCarrinho\"\n            component={ () => (\n              <CardCarrinho\n                cartItems={ cartItems }\n                updateAppState={ this.updateAppState }\n                isAddButtonDisabled={ this.isAddButtonDisabled }\n              />) }\n          />\n          <Route\n            path=\"/product-details/:id\"\n            render={ (props) => (\n              <ProductDetails\n                { ...props }\n                { ...this.state }\n                updateAppState={ this.updateAppState }\n                handleAddProduct={ this.handleAddProduct }\n              />) }\n          />\n          <Route\n            path=\"/checkout\"\n            render={ () => (<FinishingProduct { ...this.state } />) }\n          />\n        </Switch>\n      </BrowserRouter>);\n  }\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}